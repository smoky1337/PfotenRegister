{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
	<h1 class="mb-4">Benutzerverwaltung</h1>
	<div class="d-flex justify-content-end mb-3">
		<a href="{{ url_for('admin.register_user') }}" class="btn btn-success">
			<i class="fas fa-user-plus"></i> Neuen Benutzer anlegen
		</a>
	</div>
	<div class="table-responsive">
		<table id="userTable" class="table table-striped table-bordered">
			<thead class="table-dark">
			<tr>
				<th>ID</th>
				<th>Benutzername</th>
				<th>Klarname</th>
				<th>Rolle</th>
				<th>Aktion</th>
			</tr>
			</thead>
			<tbody>
			{% for user in users %}
			<tr>
				<td>{{ user.id }}</td>
				<td>{{ user.username }}</td>
				<td>{{ user.realname }}</td>
				<td>{{ user.role }}</td>
				<td>
					<div class="dropdown">
						<button class="btn btn-secondary btn-sm dropdown-toggle" type="button"
								id="actionMenuButton{{ user.id }}" data-bs-toggle="dropdown"
								aria-expanded="false">
							<i class="fas fa-gear"></i>

						</button>

						<ul class="dropdown-menu" aria-labelledby="actionMenuButton{{ user.id }}">
							<li>
								<a class="dropdown-item"
								   href="{{ url_for('admin.edit_user', user_id=user.id) }}">
									<i class="fa-solid fa-eye"></i> Bearbeiten
								</a>
							</li>
							<li>
								<form action="{{ url_for('admin.delete_user', user_id=user.id) }}" method="post"
						  style="display:inline;">
									<button type="submit" class="dropdown-item"
											onclick="return confirm('Möchten Sie diesen Benutzer wirklich löschen?');">
										<i class="fa-solid fa-trash"></i> Löschen
						</button>
					</form>
							</li>

						</ul>
					</div>

				</td>
			</tr>
			{% endfor %}
			</tbody>
		</table>
	</div>
</div>
{% endblock %}
<!-- Include DataTables CSS and JS for sorting with German UI -->
{% block scripts %}

<script>
	$(document).ready(function () {
		$('#userTable').DataTable({
			"order": [[0, "asc"]],
			"language": {
				"url": "https://cdn.datatables.net/plug-ins/1.10.25/i18n/German.json"
			}
		});
	});
</script>
{% endblock %}
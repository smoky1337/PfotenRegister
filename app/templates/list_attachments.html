{% extends "base.html" %}
{% block content %}
	<div class="container mt-4">
		<h1 class="mb-4">Alle Dokumente</h1>
		<div class="table-responsive">
			<table class="table table-striped table-bordered">
				<thead class="table-dark">
				<tr>
					<th>Hochgeladen</th>
					<th>Gästennummer</th>
					<th>Name</th>
					<th>Dateiname</th>
					<th>Aktionen</th>
				</tr>
				</thead>
				<tbody>
				{% for att in attachments %}
					<tr>
						<td>{{ att.uploaded_on.strftime('%d.%m.%Y') }}</td>
						<td>{{ att.number }}</td>
						<td>{{ att.lastname }}, {{ att.firstname }}</td>
						<td>{{ att.filename }}</td>
						<td class="action-cell">
							<div class="dropdown">
								<button class="btn btn-secondary btn-sm dropdown-toggle" type="button"
										id="actionMenuButton{{ att.number }}" data-bs-toggle="dropdown"
										aria-expanded="false">
									<i class="fas fa-gear"></i>

								</button>

								<ul class="dropdown-menu" aria-labelledby="actionMenuButton{{ att.number }}">
									<li>
										<a class="dropdown-item"
										   href="{{ url_for('attachment.download_attachment', att_id=att.id) }}">
											<i class="fa-solid fa-eye"></i> Download
										</a>
									</li>
									<li>
										<form method="post"
								  action="{{ url_for('attachment.delete_attachment', att_id=att.id) }}"
								  style="display:inline;">
											<button type="submit" class="dropdown-item" title="Löschen">
												<i class="fa-solid fa-trash"></i> Löschen
								</button>
							</form>
									</li>

								</ul>
							</div>
						</td>


					</tr>
				{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
{% endblock %}
{% block scripts %}
	<script>
        $(document).ready(function () {
            $('.table').DataTable({
                language: {
                    url: "//cdn.datatables.net/plug-ins/1.10.25/i18n/German.json"
                }
            });
        });
	</script>
{% endblock %}